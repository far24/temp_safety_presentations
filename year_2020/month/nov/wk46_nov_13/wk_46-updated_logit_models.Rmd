---
title: 'Week 46 (Nov6-13): Updated Logit Models'
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      message = FALSE)
```

```{r}
library(here)
library(DT)
```

```{r}
path_explr <- "rmd/truck_involved_crashes/03-exploratory_analysis/output"
path_mod <- "rmd/truck_involved_crashes/04-model/04-rscripts/04-model_output/regression_results/wk_nov7_13_2020"
```


## Analysis {.tabset .tabset-pills}

### Exploratory: All CAT

```{r exlr_all_cat}
htmltools::includeHTML(here(path_explr,"/summ_stat_wztruck_all_cat.html"))
```

### Exploratory: Model 1,2

```{r exlr_mod1-2}
htmltools::includeHTML(here(path_explr, "/summ_stat_wztruck_mod1-2.html"))
```


### Model 1 {.tabset .tabset-pills}

#### Estimates

```{r mod1_est}
# read output file
mod1_est <- readr::read_csv(here(path_mod, "/model_1_estimates.csv"))
```

```{r}
DT::datatable(mod1_est %>% dplyr::select(c(2,3,11, 4,7)),
              filter = 'top', 
              options = list(
                pageLength = 100, 
                autoWidth = TRUE)
                )
```

#### Odd-ratio


```{r mod1_odd}
# read output file
mod1_odd <- readr::read_csv(here(path_mod, "/model_1_odd_ratio.csv"))
```

```{r}
DT::datatable(mod1_odd %>% dplyr::select(c(8,9,11,2,5)),
              filter = 'top', 
              options = list(
                pageLength = 100, 
                autoWidth = TRUE)
                )
```

#### Plots

**Logit model estimates for p-value <0.05**

```{r}
knitr::include_graphics(here(path_mod, "/model_1_estimates.jpeg"))
```

**Logit model odd-ratio for p-value <0.05**

```{r}
knitr::include_graphics(here(path_mod, "/model_1_odd_ratio.jpeg"))
```

### Model 2 {.tabset .tabset-pills}

In model 2, the baseline variables are redefined.  

#### Estimates

```{r mod2_est}
# read output file
mod2_est <- readr::read_csv(here(path_mod, "/model_2_estimates.csv"))
```

```{r}
DT::datatable(mod2_est %>% dplyr::select(c(8,9,11, 2,5)),
              filter = 'top', 
              options = list(
                pageLength = 100, 
                autoWidth = TRUE)
                )
```

#### Odd-ratio


```{r mod2_odd}
# read output file
mod2_odd <- readr::read_csv(here(path_mod, "/model_2_odd_ratio.csv"))
```

```{r}
DT::datatable(mod2_odd %>% dplyr::select(c(8,9,11,2,5)),
              filter = 'top', 
              options = list(
                pageLength = 100, 
                autoWidth = TRUE)
                )
```

#### Plots

**Logit model estimates for p-value <0.05**

```{r}
knitr::include_graphics(here(path_mod, "/model_2_estimates.jpeg"))
```

<!-- **Logit model odd-ratio for p-value <0.05** -->

<!-- ```{r} -->
<!-- knitr::include_graphics(here(path_mod, "/model_2_odd_ratio.jpeg")) -->
<!-- ``` -->


**Logit model average marginal effects for p-value <0.05**

```{r}
knitr::include_graphics(here(path_mod, "/model_2_mfx.jpeg"))
```
















### Model 3 {.tabset .tabset-pills}

#### Estimates

```{r mod3_est}
# read output file
mod3_est <- readr::read_csv(here(path_mod, "/model_3_estimates.csv"))
```

```{r}
DT::datatable(mod3_est %>% dplyr::select(c(8,9,11, 2,5)),
              filter = 'top', 
              options = list(
                pageLength = 100, 
                autoWidth = TRUE)
                )
```

#### Odd-ratio


```{r mod3_odd}
# read output file
mod3_odd <- readr::read_csv(here(path_mod, "/model_3_odd_ratio.csv"))
```

```{r}
DT::datatable(mod3_odd %>% dplyr::select(c(8,9,11,2,5)),
              filter = 'top', 
              options = list(
                pageLength = 100, 
                autoWidth = TRUE)
                )
```

#### Plots

**Logit model estimates for p-value <0.05**

```{r}
knitr::include_graphics(here(path_mod, "/model_3_estimates.png"))
```

**Logit model odd-ratio for p-value <0.05**

```{r}
knitr::include_graphics(here(path_mod, "/model_3_odd_ratio.png"))
```

**Logit model average marginal effects for p-value <0.05**

```{r}
knitr::include_graphics(here(path_mod, "/model_3_mfx.png"))
```
